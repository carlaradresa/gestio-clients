entity PlantillaFeina {
    dia Dia,
    horaInici Instant,
    horaFinal Instant,
    periodicitat Periodicitat,
    tempsPrevist Duration,
    facturacioAutomatica Boolean,
    observacions String,
    setmanaInicial LocalDate,
    setmanaFinal LocalDate,
    numeroControl Integer
}

entity Categoria{
	nomCategoria String
}

enum Dia {
	DILLUNS, DIMARTS, DIMECRES, DIJOUS, DIVENDRES, DISSABTE, DIUMENGE, QUALSEVOL
}

entity RepeticioTascaSetmanal{
	dia Dia,
    activo Boolean
}

enum Periodicitat {
 DIA, SETMANA, QUINZENAL, MES, ANY 
}

entity Ubicacio {
	longitud Double,
    latitud Double,
    ubicacio String
}

entity Client{
    nom String,
    direccio String,
    localitat String,
    telefon String,
    email String,
    nif String,
    codiUbicacio String,
    observacions String
}

entity Feina {
    nom String,
    descripcio String,
    setmana LocalDate,
    tempsPrevist Duration,
    tempsReal Duration,
    estat Boolean,
    intervalControl Integer,
    facturacioAutomatica Boolean,
    observacions String,
    comentarisTreballador String
}

entity Control {
	numero Integer,
    setmana LocalDate,
    causa String,
    dataRevisio ZonedDateTime,
    comentaris String
}

entity Marcatge {
    horaEntrada Instant,
    horaSortida Instant,
    desviacio Boolean
}

entity Treballador {
    nom String,
    carregaHores Duration,
    actiu Boolean,
    controlQualitat Boolean
}

entity Venedor {
    nom String,
    telefon String,
    email String,
    observacions String
}

relationship ManyToOne {
	RepeticioTascaSetmanal{feina(numero)} to Feina,
    Client{venedor(numero)} to Venedor,
    Feina{plantillaFeina(numero)} to PlantillaFeina,
    Feina{categoria(nom)} to Categoria,
    Marcatge{feina(nom)} to Feina,
    Marcatge{treballador(nom)} to Treballador,
    Feina{client(nom)} to Client,
    Control{revisor(nom)} to Treballador,
    Control{feina(nom)} to Feina
}

relationship OneToOne {
    Client{ubicacio(ubicacio)} to Ubicacio{client},
    Venedor{ubicacio(ubicacio)} to Ubicacio{venedor},
    Treballador{user(login)} to User
}

relationship ManyToMany {
	Feina{treballador(nom)} to Treballador{feina}
}